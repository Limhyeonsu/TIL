# 18. 경계 해부학
시스템 아키텍처는 일련의 소프트웨어 컴포넌트와 그 컴포넌트들을 분리하는 경계에 의해 정의된다.

## 경계 횡단하기
런타임에 경계를 횡단한다 함은 그저 경계 한쪽에 있는 기능에서 반대편 기능을 호출하여 데이터를 전달하는 일에 불과하다. 적절한 위치에서 경계를 횡단하게 하는 비결은 소스 코드 의존성 관리에 있다.

소스코드인 이유는 소스 코드 모듈 하나가 변경되면, 이에 의존하는 다른 소스코드 모듈도 변경하거나, 다시 컴파일해서 새로 배포해야 할지도 모르기 때문이다. `경계는 이러한 변경이 전파되는 것을 막는 방화벽을 구축하고 관리하는 수단으로써 존재한다.`

## 두려운 단일체
아키텍처 경계 중 가장 단순하고 흔한 형태는 물리적으로 엄격하게 구분되지 않는 형태다. 배포 관점에서 이는 소위 단일체라고 불리는 단일 실행 파일에 지나지 않는다.(예. exe, jar 등등) 배포관점에서 볼 때 단일체는 경계가 드러나지 않는다. 그렇다고 해서 경계 자체가 무의미하다는 뜻은 아니다. 최종적으로 정적으로 링크된 단일 실행 파일을 만들더라도, 그 안에 포함된 다양한 컴포넌트를 개발하고 바이너리로 만드는 과정을 독립적으로 수행할 수 있게 하는 일은 대단히 가치 있는 일이다. 이러한 아키텍처는 특정한 동적 다형성에 의존하여 내부 의존성을 관리한다.

가장 단순한 형태의 경계 횡단은 저수준 클라이언트에서 고수준 서비스로 향하는 함수 호출이다. 이 경우 런타임 의존성과 컴파일타임 의존성은 모두 같은 방향 즉 저수준 컴포넌트에서 고수준 컴포넌트로 향한다.

단일체에서 컴포넌트 간 통신은 매우 빠르고 값싸다. 소스 수준에서 결합이 분리되면(인터페이스 사용) 경계를 가로지르는 통신은 상당히 빈번할 수 있다.

## 배포형 컴포넌트
아키텍처의 경계가 물리적으로 드러날 수도 있는데 그중 가장 단순한 형태는 동적 링크 라이브러리다. 컴포넌트를 이 형태로 배포하면 따로 컴파일하지 않고 곧바로 사용할 수 있다. (대신 바이너리 처럼 배포 가능한 형태로 전달한다.)

## 스레드
단일체와 배포형 컴포넌트는 모두 스레드를 활용할 수 있다. 스레드는 아키텍처 경계도 아니며 배포 단위도 아니다. 실행 계획과 순서를 체계화하는 방법에 가깝다.

## 로컬 프로세스
로컬 프로세스는 주로 명령행이나 그와 유사한 시스템 호출을 통해 생성된다. 로컬 프로세스들은 동일한 프로세서 또는 하나의 멀티코어 시스템에 속한 여러 프로레서들에서 실행되지만, 각각이 독립된 주소 공간에서 실행된다. 대개의 경우 소켓, 메일박스, 메세지 큐와 같이 운영체제에서 제공하는 통신 기능을 이용하여 서로 통신한다. 

## 서비스
물리적인 형태를 띠는 가장 강력한 경계는 바로 서비스다. 서비스는 프로세스로 일반적인 명령행 또는 그와 동등한 시스템 호출을 통해 구동된다. 서비스는 자신의 물리적 위치에 구애받지 않고, 모든 통신이 네트워크를 통해 이뤄진다고 가정한다. 

서비스 경계를 지나는 통신은 함수 호출에 비해 매우 느리기때문에 빈번한 통신을 하는 일은 피해야 한다. 

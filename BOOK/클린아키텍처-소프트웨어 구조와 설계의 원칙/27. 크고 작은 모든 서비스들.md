# 27. '크고 작은 모든' 서비스들
## 서비스 아키텍처?
시스템의 아키텍처는 의존성 규칙을 준수하며 고수준의 정책을 저수준의 세부사항으로부터 분리하는 경계에 의해 정의된다.

모든 서비스가 반드시 아키텍처 관점에서 중요해야만 하는 것은 아니다. 기능을 프로세스나 플랫폼에 독립적이 되게끔 서비스들을 생성하면 의존성 규칙 준수 여부과 상관없이 큰 도움이 될 때가 많다. 그러나 서비스 그 자체로는 아키텍처를 정의하지 않는다.

그리고 아키텍처를 정의하는 요소로 의존성 규칙을 따르며 아키텍처 경계를 넘나드는 함수 호출이 있다. 하지만 시스템에서 많은 함수들은 행위를 서로 분리할 뿐 아키텍처적으로는 전혀 중요하지 않다. 서비스도 마찬가지로 프로세스나 플랫폼 경계를 가로지르는 함수 호출에 지나지 않는다.

## 서비스의 이점?
* 결합 분리의 오류 : 시스템을 서비스들로 분리함으로써 큰 이점은 서비스 사이의 결합이 확실히 분리된다는 점이다. 이 이점은 어느정도 일리가 있지만 꼭 그렇지는 않다. 서비스는 개별 변수 수준에서는 각각 결합이 분리되지만 프로세서 내, 네트워크 상의 공유 자원때문에 결합될 가능성이 여전히 존재한다.
* 개발 및 배포 독립성의 오류 : 서비스를 전담팀이 소유하고 운영한다는 이점이 있다. 각 서비스를 전담팀에서 작성하고, 유지보수하며 운영하는 책임을 질 수 있다.

## 야옹이 문제
254~256p

요약) 어떠한 시스템을 잘게 쪼개 msa 방식으로 운영하고 있었는데 새로운 기능 요구가 추가되면서 전체 시스템의 수정이 필요한 상황이 온 경우가 있을 수 있다. 즉 msa 로 되어있지만 각각의 서비스들은 모두 결합되어 있어서 독립적으로 개발하고, 배포하거나 유지될 수 업삳.

## 객체가 구출하다
256~257p

## 컴포넌트 기반 서비스
서비스가 반드시 소규모일 이유는 없다. 서비스는 SOLID 원칙대로 설계할 수 있으며 컴포넌트 구조를 갖출 수도 있다.

자바의 경우 서비스를 하나 이상의 jar 파일에 포함되는 추상 클래스들의 집합이라고 생각하라 새로운 기능의 추가 확장은 새로운 jar 파일로 만든다. 이때 새로운 jar 파일은 기존 jar 파일에 정의된 추상 클래스들을 확장해서 만들어진다. 이때 새로운 jar 파일을 구성하는 클래스들은 기존 jar 파일에 정의된 추상 클래스들을 확장해서 만들어진다.

## 횡단 관심사
지금까지 정리한 내용을 토대로 아키텍처 경계가 서비스 사이에 있지 않다는 사실을 알 수 있다. 오히려 서비스를 관통하며 서비스를 컴포넌트 단위로 분할한다.

모든 주요 시스템이 직면하는 횡단 관심사를 처리하려면 서비스 내부는 의존성 규칙도 준수하는 컴포넌트 아키텍처로 설계해야 한다.

## 결론
서비스는 시스템의 확장성과 개발 가능성 측면에서 유용하지만 그 자체로는 아키텍처적으로 그리 중요한 요소는 아니다. 시스템의 아키텍처는 시스템 내부에 그어진 경계와 경계를 넘나드는 의존성에 의해 정의된다.

서비스는 단 하나의 아키텍처 경계로 둘러싸인 단일 컴포넌트로 만들 수 있다. 
# 9. 나쁜 코드와 인지 부하를 방지하는 두 가지 프레임워크
## 9.1 코드 스멜이 인지 부하를 초래하는 이유
코드 스멜은 작동은 하지만 개선의 여지가 있는 코드를 의미한다.

### 9.1.1 코드 스멜에 대한 간략한 소개
코드 스멜의 예로는 매우 긴 메서드, 동시에 너무 많은 작업을 시도하는 클래스, 지나치게 복잡한 스위치문 등이 있다.

리팩터링이라는 용어는 코드 스멜을 해소하거나 일반적인 의미의 코드 개선을 뜻하는 용어로 쓰이게 되었다.

[코드 스멜 종류]
* 긴 메서드
* 많은 인수 
* 스위치 문 : 스위치문은 길면 안 된다.
* 다른 것처럼 보이나 같은 클래스 
* 원시 타입 집착 : 원시 데이터 타입의 과도한 사용은 피해야 한다.
* 미완성 라이브러리 클래스
* 너무 큰 클래스
* 게으른 클래스 : 클래스가 하는 일이 너무 적으면 존재할 이유가 없다.
* 데이터 클래스 : 클래스는 데이터만 가져서는 안되고, 메서드도 가져야 한다.
* 임시 필드 : 클래스는 불필요한 임시 필드를 가져서는 안 된다.
* 데이터 그룹 : 같이 사용되는 데이터는 같은 클래스나 구조체에 저장되어야 한다.
* 산재한 수정 : 클래스의 여러 부분을 수정해야 한다면 코드 구조가 잘못된 것을 의미한다.
* 기능 이전 : 클래스 A의 많은 메서드가 클래스 B에 의해 참조되면 그 메서드들은 B로 옮겨야 한다.
* 부적절한 연관
* 중복 코드 또는 코드 클론
* 주석문 : 주석문은 그 코드가 왜 이곳에 있는지를 설명해야한다.
* 메시지 체인 : 메시지 호출이 연속해서 꼬리를 무는 방식으로 이루어져서는 안 된다.
* 미들맨 : 클래스가 하는일 없이 위임을 많이 사용하면 존재할 이유가 없다.
* 평행상속 : 한 클래스의 서브 클래스 생성시 다른 클래스의 서브 클래스도 만들어야 한다면 두 클래스의 기능은 하나의 클래스로 합쳐야 한다.
* 상속 거절 : 클래스가 자신이 사용하지 않는 것을 상속받는다면 상속은 필요없을지 모른다.
* 샷건 수술 : 하나의 사항에 대해 여러 클래스를 수정해야 한다면 코드 구조에 문제가 있으므로 수정할 여러 부분을 하나의 클래스로 묶어야 한다.
* 추측에 근거한 일반성 : 필요한 기능만 추가하라(만일의 경우 X)

__코드 스멜 영향__

코드 스멜이 있다고 해서 코드에 반드시 오류가 있는 것은 아니다. 다만 코드 스멜을 가지고 있는 코드는 오류가 있을 가능성이 높은 것으로 알려져 있다.

### 9.1.2 코드 스멜이 인지 과정에 악영향을 미치는 방식
많은 코드 스멜은 두뇌의 인지 기능과 관련이 있다. 

* 긴 매개변수 목록, 복잡한 스위치 문 : 작업 기억 공간의 용량 초과
* 신의 클래스, 긴 메서드 : 효율적인 청킹 불가능
* 코드 클론 : 청킹이 잘못됨

## 9.2 나쁜 이름이 인지 부하에 미치는 영향
코드 스멜은 구조적 안티패턴 문제가 있는 코드다. 이것은 코드가 잘 작성되었으나 파악하기 어려운 구조로 만들어졌다는 것을 의미한다.

그러나 코드에는 개념적 안티패턴도 있을 수 있다. 구성은 올바르게 되어있으나 혼동되는 이름을 갖는 경우 `언어적 안티패턴`으로 설명할 수 있다.

### 9.2.1 언어적 안티패턴
언어적 안티패턴은 코드의 언어적 요소(메서드의 입출력 정의, 설명문서, 속성 이름, 데이터 타입, 주석문 등)와 그 역할 사이의 불일치를 의미한다.

예) isValid 같이 불리언 변수처럼 보이는 변수가 실제로는 정숫값을 갖는 등

[아나우도바의 언어적 안티패턴]
1. 이름이 나타내는 것보다 더 많은 일을 하는 메서드
2. 이름이 나타내는 것보다 더 적은 일을 하는 메서드
3. 이름과 정반대의 일을 하는 메서드
4. 개체에 포함된 것보다 더 많은 것을 가지고 있는 것처럼 보이는 식별자 이름
5. 개체에 포함된 것을 누락하는 식별자 이름
6. 개체에 포함된 것과 반대되는 식별자 이름

### 9.2.2 인지 부하 측정
* 인지 부하에 대한 파스 척도 : 파스 척도는 한 가지 질문으로 구성된 상대적으로 간단한 설문을 사용한다. 그래서 신뢰성 있게 구별할 수 있는지 불분명하나 흔히 사용된다.
* 눈 기반 측정 : 시선 추적 장치를 이용하여 사람들이 얼마나 집중하고 있는지 알 수 있다. 작업이 어려울수록 깜빡임이 줄어드는 것으로 보고됐다. 또한 작업이 어려울수록 동공 크기도 크게 측정되고 인지 부하도 더 커지는 것으로 나타났다.
* 피부 기반 측정 : 피부 온도와 땀 흘리는 정도
* 뇌 기반 측정
* 뇌전도 : 뇌활동이 일으키는 전압의 변화를 측정
* 기능적 fNIRS와 프로그래밍

### 9.2.3 언어적 안티패턴 및 인지 부하
170~171p

### 9.2.4 언어적 안티패턴이 혼란을 일으키는 이유
언어적 안티패턴을 많이 가지고 있는 코드는 인지 부하를 더 많이 유발한다. 

자신이 작성하지 않은 익숙치 않은 코드를 일을때 LTM은 관련 사실과 경험을 검색한다. 이때 충동하는 이름을 읽게 되면 잘못된 정보가 주어질 수 있다. 또 중복 코드처럼 잘못된 청킹이 발생할 수 있다. isValid 같은 변수 이름을 불리언 변수라고 가정할 수 있는데 이 변수가 불리언 변수가 아니라면 두뇌는 에너지를 절약하려고 노력하는 과정에서 잘못된 가정을 한것이다.
# 4. 복잡한 코드 읽는 방법
코드가 혼란스러운 이유는 
1. STM에 저장되어 있어야 할 정보가 부족하기 때문
2. LTM에 저장되어 있는 지식이 부족하기 때문
3. 두뇌 처리 능력 부족

앞서 코드를 더 잘 읽을 수 있는 기법을들 살펴봤다. 하지만 때로 코드가 너무 복잡해서 많은 문법 지식과 효율적인 청킹으로도 코드를 이해하기 어려울 때가 있다.

## 4.1 복잡한 코드를 이해하는 것이 왜 어려울까?
작업 기억 공간은 `두뇌가 생각`하고 `새로운 아이디어를 형성`하고 `문제를 해결하는 능력`에 해당한다.
1. 작업 기억 공간과 STM의 차이 : STM의 역할이 정보를 기억하는 것인 반면, 작업 기억 공간의 역할은 정보를 처리하는 것이다. 예) 전화번호를 기억하는 일은 STM을 사용, 두 정수를 더하는 일은 작업 기억 공간을 사용한다.
2. 프로그래밍과 관련한 인지 부하의 종류 : 
   a. 내재적 - 문제 자체가 얼마나 복잡한지를 나타낸다. 예) 직삼각형의 빗변의 길이 계산시 피타고라스 정의를 알고 있는 상태에서 계산을 해야한다.
   b. 외재적 - 외부적 요인에 의해 문제에 추가된 것, 외재적 부하는 프로그래머에 따라 다르다. 특정 개념을 많이 경험할수록 그것에 대한 인지 부하는 적어진다.
   c. 본유적 - 생각을 LTM에 저장하는 과정에서 일어나는 인지 부하

코드를 읽을때 잘 이해가 안되고 뭔가 적어놓거나 단계별로 실행 순서를 따라가고 싶은 마음이 들면 인지 부하가 높은 것이다.

## 4.2 인지 부하를 줄이기 위한 기법
1. 리팩터링 : 코드가 외부적으로 제공하는 기능은 유지한 채 코드의 내부 구조를 개선하는 것을 의미한다. 대개 리팩토링은 코드의 유지보수를 쉽게 하기 위한 목적으로 이루어지며 반드시 가독성이 좋아지는 것은 아니다. 따라서 유지보수 하기 좋은 코드보다는 장기적으로 가독성이 높은 코드를 작성하도록 리팩터링 하는 것이 좋을 수 있다.(인지적 리팩토링)
2. 생소한 언어 구성 요소를 다른 것으로 대치하기
   a. 람다 - 람다 대신 for 루프 사용 하거나 불리언 값을 반환하는 함수 사용 등으로 변경할 수 있다. 
   b. 리스트 컴프리헨션
   c. 삼항 연산자 - 삼항 연산자 대신 if 문 사용
3. 플래시카드에 코드 동의어 추가

가독성이란 보는 사람 눈에 읽기 좋다는 의미로 무엇이 읽기 쉬운지는 이미 가지고 있는 지식에 따라 다르기 때문에 좀 더 친숙한 형태로 코드를 바꿔서 이해하는 것은 부끄러운 일이 아니다.

## 4.3 작업 기억 공간에 부하가 오면 쓸 수 있는 기억 보조 수단
복잡한 구조의 코드는 두 가지 방식으로 작업 기억 공간에 과부하를 유발한다.
1. 정확히 코드의 어디를 파악해야 하는지 모를 때
2. 코드가 서로 밀접하게 연결되어 있는 경우 두뇌는 두 가지 작업을 동시에 수행한다. 코드의 개별 라인을 이해하면서 코드의 구조를 이해해야 한다.

### 의존 그래프 생성
코드를 바탕으로 의존 그래프를 만들면 흐름을 이해하고 논리적 흐름에 따라 코드를 읽는데 도움이 된다.
1. 모든 변수를 원으로 표시한다.
2. 원으로 표시된 동일한 변수끼리 선으로 연결한다.
3. 모든 메서드나 함수 호출을 원으로 표시한다.
4. 메서드나 함수 호출을 정의와 연결한다. - 딱 한 번 호출되는 메서드는 인라인으로 리팩터링할 수 있는 대상이 된다.
5. 클래스의 모든 인스턴스를 원으로 표시한다.
6. 클래스와 그 클래스의 인스턴스를 연결한다.

### 상태표 사용
때로는 코드의 구조 때문이 아니라 코드에서 수행하는 계산 로직 때문에 어려울 수 있다. 이것은 처리 능력의 부족과 관련 있다.

상태표는 코드의 구조보다 변수의 값에 중점을 둔다. 테이블 형식으로 만들어 열은 변수, 행은 해당 변수가 각 단계에서 갖는 값을 나타낸다.

| |변수1|변수2|변수3|
|---|---|---|---|
|int|7|7|-|7|
|Loop1| |3|1|3|
|Loop2| | | | |

1. 모든 변수를 나열한다.
2. 테이블을 만들고 각 열에 하나의 변수를 기입한다.
3. 코드의 실행 단계마다 행을 만든다.
4. 코드를 각 단계별로 실행하고 그 단계에서 변수들의 값을 해당하는 열과 행에 적는다.

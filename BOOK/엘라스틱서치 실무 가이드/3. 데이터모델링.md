# 3. 데이터 모델링
엘라스틱서치에서 색인할 때 문서의 데이터 유형에 따라 필드에 적절한 데이터 타입을 지정해야 한다. 이러한 과정을 매핑이라고 하며, 매핑은 색인된 문서의 데이터 모델링리라고도 할 수 있다.

## 3.1 매핑 API 이해하기
문서에 존재하는 필드의 속성을 정의할 때 각 필드 속성에는 데이터 타입과 메타데이터가 포함된다. 이를 통해 색인 과정에서 문서가 어떻게 역색인으로 변환되는지를 상세하게 저장할 수 있다.

엘라스틱서치는 기본적으로 스키마리스이기 때문에 명시적으로 필드를 정의하지 않아도 데이터 유형에 따라 필드 데이터 타입에 대한 매핑 정보가 자동으로 생성된다. 한 번 생성된 매핑 타입은 변경할 수 없으므로 자동 매핑방식은 사용하지 않는 것이 안전하다.

실제 검색 대상이 되는 필드는 분석이 가능하도록 text 타입으로 정의한다.

1. 인덱스 생성 : `PUT {인덱스명}`
2. 매핑 확인 : `GET {인덱스명}/_mapping`
3. 매핑 파라미터 : 색인할 필드의 데이터를 어떻게 저장할지에 대한 다양한 옵션이 있다.
    * analyzer : 해당 필드의 데이터를 형태소 분석하겠다는 의미의 파라미터이다. text 타입의 필드는 기본적으로 사용해야 한다.
    * normalizer : term query에 분석기를 사용하기 위해 사용된다. 예) keyword 타입은 원문 그대로(소문자, 대문자 구분O) 색인되어 소문자 대문자가 달라도 서로 다른 문서로 인식된다. 이때 이 파라미터를 사용하면 같은 데이터로 인식하게 할 수 있다.
    * boost : 필드에 가중치 부여, _score 점수가 달라지기 때문에 검색 결과의 노출 순서에 영향을 준다.
    * coerce : 색인시 자동 변환을 허용할지 여부를 설정
    * copy_to : 매핑 파라미터를 추가한 필드의 값을 지정한 필드로 복사한다.
    * fielddata : 엘라스틱서치가 힙 공간에 생성하는 메모리캐시 (구버전)
    * doc_values : 엘라스틱서치가 기본으로 사용하는 캐시, text 타입을 제외한 모든 타입에서 기본으로 사용한다.
    * dynamic : 필드 추가시 동적으로 생성할지, 않을지 결정
    * enabled : 검색 결과에는 포함되지만 색인은 하고싶지 않은 경우
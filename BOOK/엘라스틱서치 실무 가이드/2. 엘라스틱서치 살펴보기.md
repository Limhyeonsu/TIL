# 2. 엘라스틱서치 살펴보기
## 2.1 엘라스틱서치를 구성하는 개념
[기본 용어]
* 인덱스 : 데이터 저장 공간, 하나의 인덱스에는 하나의 타입만 가진다. 하나의 물리적인 노드에 여러개의 논리적인 인덱스를 생성할 수 있다. 검색시 인덱스 이름으로 문서를 검색한다. 인덱스의 이름은 모두 소문자여야 한다.
* 샤드 : 색인된 문서는 하나의 인덱스에 담기고, 인덱스 내부에 색인된 데이터는 물리적인 공간에 여러 개의 파티션으로 나뉘어 구성되는데 이 파티션을 샤드라고 부른다.
* 타입 : 인덱스의 논리적 구조를 의미하며, 인덱스 속성에 따라 분류하기도 한다.
* 문서 : 데이터가 저장되는 최소 단위이다. 기본적으로 JSON 포맷으로 데이터가 저장된다. 데이터베이스에서 테이블의 행이 문서에 해당한다.
* 필드 : 문서를 구성하기 위한 속성이다. 하나의 필드는 목적에 따라 다수의 데이터 타입을 가질 수 있다.
* 매핑 : 문서의 필드와 필드의 속성을 정의하고 그에 따른 색인 방법을 정의하는 프로세스다. 매핑정보에는 여러가지 데이터 타입을 지정할 수 있지만 필드명은 중복해서 사용할 수 없다.

[노드의 종류]

클러스터는 물리적인 노드 인스턴스들의 모임이고, 모든 노드의 검색과 색인 작업을 관장하는 논리적인 개념이다. 엘라스틱서치의 경우 다수의 서버로 분산해서 처리하는 것이 가능하기 때문에 대용량 데이터를 처리할 수 있다.

분산 처리를 위해서는 다양한 형태의 노드들을 조합해서 클러스터를 구성해야 한다.

* 마스터 노드 : 인덱스 생성, 삭제 등 클러스터와 관련된 전반적인 작업을 담당한다. 따라서 네트워크 속도가 빠르고 지연이 없는 노드를 마스터 노드로 선정해야 한다.
* 데이터 노드 : 문서가 실제로 저장되는 노드다. (샤드가 배치되는 노드이기도 하다) 데이터 노드는 가능한 한 마스터 노드와 분리해서 구성하는 게 좋다. 
* 코디네이팅 노드 : 들어온 요청을 단순히 라운드로빈 방식으로 분산시켜주는 노드다.
* 인제스트 노드 : 색인에 앞서 데이터를 전처리하기 위한 노드다.

[클러스터, 노드, 샤드]

<img src="img/클러스터와노드.jpeg" width="700px">

위 그림에서 하나의 엘라스틱서치 클러스터에 물리적 노드 2개가 존재한다. 클러스터는 인덱스의 문서를 조회할 때 마스터 노드를 통해 2개의 노드를 모두 조회해서 각 데이터를 취한한 후 결과를 하나로 합쳐서 제공한다.

클러스터는 여러 개를 연결해서 구성할 수도 있고, 이때 클러스터의 이름으로 각각 구분한다. 

클러스터 동작 방식을 위한 테스트(34~36p)
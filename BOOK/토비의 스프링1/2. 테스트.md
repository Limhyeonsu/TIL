# 2. 테스트
테스트의 작성은 스프링의 다양한 기술을 활용하는 방법을 이해하고 검증하고, 실전에 적용하는 방법을 익히는 데 효과적으로 사용될 수 있다.

## 2.1 UserDaoTest 다시보기
### 테스트의 유용성
테스트 코드를 만듬으로써 코드를 개선하는 과정에서 처음과 동일한 기능을 수행함을 보장받을 수 있었다.

테스트란 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서 만든 코드를 확신할 수 있게 해주는 작업이다. 또 테스트의 결과가 원하는 대로 나오지 않는 경우에는 코드나 설계에 결함이 있음을 알 수 있다. 이를 통해 코드의 결함을 제거해가는 작업(디버깅)을 거치게 되고, 최종적으로 테스트가 성공하면 모든 결함이 제거됐다는 확신을 얻을 수 있다.

### UserDaoTest의 특징
```java
public class UserDaoTest {
    public static void main(String[] args) throw SQLException {
        ApplicationContext context = new GenericXmlApplicationContext("applicaionContext.xml");
        
        UserDao dao = context.getBean("userDao", UserDao.class);
        
        User user = new User();
        user.setId("user");
        user.setName("유저");
        user.setPassword("userpwd");
        
        dao.add(user);
        
        System.out.println(user.getId() + "등록 성공");
        
        User user2 = dao.get(user.getId());
        System.out.println(user2.getName());
        System.out.println(user2.getPassword());\
        
        System.out.println(user2.getId() + "조회 성공");
    }
}

```

* 웹을 통한 DAO 테스트 방법의 문제점 : 웹 화면을 통해 값을 입력하여 기능을 수행하고, 결과를 확인하는 방법은 가장 흔히 쓰이는 방법이지만 DAO 테스트로서는 단점이 너무 많다. DAO뿐 아니라 서비스, 컨트롤러, JSP 뷰 등 모든 레이어의 기능을 다 만들고 나서야 테스트가 가능하다는 점이 큰 문제다.
* 작은 단위의 테스트 : 테스트하고자 하는 대상이 명확하다면 그 대상에만 집중해서 테스트하는 것이 바람직하다. 관심사의 분리라는 원리가 테스트에도 적용된다. 테스트의 관심이 다르다면 테스트할 대상을 분리하고 집중해서 접근해야 한다.
* 자동수행 테스트 코드 : 매번 웹 화면을 띄우고 개발자가 스스로 값을 입력하고 또 조회를 위한 ID 값을 넣고 버튼을 누르는 등의 작업을 반복한다면 지루하고 불편할 것이다. 위 UserDaoTest에서 처럼 main() 메서드를 실행하는 간단한 방법만으로 테스트의 전 과정이 자동으로 진행된다. 이렇게 테스트는 자동으로 수행되도록 코드로 만들어지는 것이 중요하다.
* 지속적인 개선과 점진적인 개발을 위한 테스트

### UserDaoTest의 문제점
* 수동 확인 작업의 번거로움 : 결국 등록된 값과 조회된 값이 일치하는지는 콘솔에 찍히기 때문에 사람이 직접 확인해야 한다.
* 실행 작업의 번거로움 : 아무리 간단히 실행 가능한 main() 메서드라고 하더라도 매번 그것을 실행하는 것은 번거롭다. 만약 DAO가 수백개가 되고 그에 대한 main() 메서드가 그만큼 만들어진다면 전체 기능을 테스트할때 수백개의 main() 메서드를 실행해야 한다.

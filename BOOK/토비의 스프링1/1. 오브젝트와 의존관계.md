# 1. 오브젝트와 의존관계
스프링은 자바를 기반으로 한 기술로 가장 중요하게 가치를 두는 것이 바로 객체지향 프로그래밍이 가능하다는 것이다.

그래서 스프링을 이해하기 위해서는 `오브젝트`에 깊은 관심을 가져야 한다. 애플리케이션에서 오브젝트가 생성되고, 다른 오브젝트와 관계를 맺고 사용되고 소멸하기까지의 전 고정을 진지하게 생각해볼 필요가 있다.

오브젝트에 대한 관심은 기술적인 특징과 사용 방법을 넘어서 오브젝트 설계로 발전하게 된다. 

스프링은 오브젝트를 어떻게 효과적으로 설계하고 구현하고, 사용하고 이를 개선해나갈 것인가에 대한 명괘한 기준을 마련해준다.

## 1.1 초난감 DAO
54~59p

## 1.2 DAO의 분리
### 관심사의 분리
사용자의 비즈니스 프로세스와 그에 따른 요구사항은 끊임없이 바뀌고 발전한다. 애플리케이션이 기반을 두고 있는 기술도 시간이 지남에 따라 바뀌고, 운영되는 환경도 변화한다.

그래서 개발자가 객체를 설계할 떄 가장 염두에 둬야 할 사항은 바로 미래의 변화를 어떻게 대비할 것인가이다.

객체지향 설계와 프로그래밍이 이전의 절차적 프로그래밍 패러다임에 비해 초기에 좀 더 많은, 번거로운 작업을 요구하는 이유는 객체지향 기술 자체가 지니는 변화에 효과적으로 대처할 수 있다는 기술적인 특징 때문이다.

객체지향 기술은 실세계를 최대한 가깝게 모델링해낼 수 있고, 가상의 추상세계 자체를 효과적으로 구성할 수 있고, 이를 자유롭고 편리하게 변경, 발전, 확장시킬 수 있다는데 의미가 있다.

미래를 준비하는 데 있어 가장 중요한 과제는 변화에 어떻게 대비할 것인가이다. `가장 좋은 대책은 변화의 폭을 최소한으로 줄여주는 것이다.`

어떻게 변경이 일어날 때 필요한 작업을 최소화하고, 그 변경이 다른 곳에 문제를 일으키지 않게 할 수 있을까? 그것은 `분리와 확장을 고려한 설계가 있었기 때문이다.` 모든 변경과 발전은 한 번에 한 가지 관심사항에 집중해서 일어난다. 문제는 변화는 대체로 한 가지 관심에서 일어나지만 그에 따른 작업은 한곳에 집중되지 않는 경우가 많다. 그러므로 우리가 준비할 일은 __한 가지 관심이 한 군데에 집중되게 하는 것이다. 즉 관심이 같은 것끼리 모으고, 관심이 다른것은 따로 떨어져 있게 하는 것이다.__

__관심이 같은 것끼리는 하나의 객체 안으로 또는 친한 객체로 모이게 하고, 관심이 다른 것은 가능한 한 따로 떨어져서 서로 영향을 주지 않도록 분리하는 것이라 생각할 수 있다.__

### 커넥션 만들기의 추출
UserDao의 관심사항
```java
public class UserDao {

    public void add(User user) {
        //1. DB 커넥션 연결
        
        //2. SQL을 담을 Statement 만들고 실행
        
        //3. 작업이 끝난 Statement와 Connection 종료
    }
    
    public User get(String id) {
        //1. DB 커넥션 연결
        
        //2. SQL을 담을 Statement 만들고 실행
        
        //3. 작업이 끝난 Statement와 Connection 종료
    }
}
```
add(), get() 메서드에 중복된 코드가 발생한다. 이렇게 하나의 관심사가 방만하게 중복되어 있고, 여기저기 흩어져 있어서 다른 관심의 대상과 얽혀있으면 변경이 일어날 때 엄청난 고통을 일으키는 원인이 된다.

* 중복 코드의 메서드 추출 : 가장 먼저 커넥션을 가져오는 중복된 코드를 분리한다. getConnection()이라는 독립된 메서드로 만들고 각 DAO 메서드에서 getConnection() 메서드를 호출해서 DB 커넥션을 가져오게 만든다.
* 변경사항에 대한 검증(리팩토링과 테스트) : 변경된 UserDao의 기능이 변경하기 전과 동일한지 확인하기 위해 앞서 만든 테스트 코드를 실행하여 확인하면 된다.

위 작업은 기능에는 영향을 주지 않으면서 코드의 구조만 변경한다. 이러한 작업을 `리팩토링`이라고 한다. 그리고 getConnection() 메서드 처럼 공통의 기능을 담당하는 메서드로 중복된 코드를 뽑아내는 것을 리팩토링에서 `메서드 추출` 기법이라고 한다. 


### DB 커넥션 만들기의 독립
